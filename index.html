<!doctype html>
<html>
<head>
    <title>Pipes game</title>
    <style>
        body {
            background-color: gray;
            text-align: center;
			font-family:verdana;
        }
		
		p {
			text-align:left;
		}
		
        #btnNew{
            border: 1px solid gray;
        }
        #timer, #controls, #canvasContainer{
            font-weight: 600;
            width:500px;
            margin-left: auto;
            margin-right: auto;
            color: white;
            background-color:black;
        }
		
        #canvasContainer{
            height:500px;
        }
		#description{
			width:500px;
            margin-left: auto;
            margin-right: auto;
			background-color:white;
			margin-top:10px;
			padding:5px;
			border: 2px solid black;
			border-radius: 25px;
		}
        canvas {
            width: 500px;
            height: 500px;
        }
        
        a:link {
            text-decoration: none;
            color: white;
        }

        a:visited {
            text-decoration: none;
            color: white;
        }

        a:hover {
            text-decoration: none;
            color: white;
        }

        a:active {
            text-decoration: none;
            color: white;
        } 
        
    </style>
    <script src="js/Common.js"></script>
    <script src="js/Timer.js"></script>
    <script src="js/pipes/Engine.js"></script>
    <script src="js/pipes/Context2D.js"></script>
    <script src="js/pipes/games.js"></script>
    <script>
        var gameContext = null,
            timer = null;

        function initGame() {
            var canvas = document.getElementById("game");
            gameContext = new Context2D(canvas, 10, 10);
            gameContext.start();
            canvas.addEventListener('contextmenu', function (event) { event.preventDefault(); }, false);

            gameContext.canvas.addEventListener('mousedown', canvasClick, false);
            gameContext.canvas.addEventListener('touchstart', canvasTouch, false);

            var timerContainer = document.getElementById("timer");
            timer = new Timer(timerContainer);
            timer.start();
        }
        
        //events
        function canvasClick(event) {
            event.preventDefault();
            gameContext.click(event.button, event.clientX, event.clientY, onWin);
        }

        function canvasTouch(event) {
            event.preventDefault();
            gameContext.click(0, event.touches[0].pageX, event.touches[0].pageY, onWin);
        }

        function onWin() {
            gameContext.canvas.removeEventListener('mousedown', canvasClick, false);
            gameContext.canvas.removeEventListener('touchstart', canvasTouch, false);
        }

        window.onload = initGame;
    </script>
</head>
<body>
    <div id="timer"></div>
	<div id="canvasContainer">
        <canvas id="game" width="500" height="500" >
			Unfortunately, your browser does not support HTML5 canvas element.
		</canvas>
    </div>
    <div id="controls" ><a href="index.html" >New game</a></div>
	<div id="description" >
		<h4>Hot to play?</h4>
		<p>One needs to rotate cells so their alignment can allow the current to pass through them. There is one green radial source of the current, that can also be rotated. A cell has a current flowing through it when it turns green.</p>
		<h4>Controls</h4>
		<p>Left click = Rotate counter-clockwise<br/>Right click = Rotate clockwise<br/>Middle click = lock a cell against rotation</p>
	</div>
</body>
</html>